{% extends 'base.html' %}
{% load humanize %}
{% load l10n %}

{% block title %}Resumo Financeiro{% endblock %}

{% block content %}

<style>
    .bloco-title {
        background: #d8dce2;
        padding: 10px;
        border-radius: 8px;
        text-align: center;
        font-weight: bold;
        margin-bottom: 8px;
    }

    .bloco {
        background: #bec4d1;
        padding: 12px;
        border-radius: 8px;
        text-align: center;
        margin-bottom: 10px;
        font-weight: 600;
    }

    .linha {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 10px;
        margin-bottom: 25px;
    }
</style>

<div class="container">

    <!-- ======================= ENTRADAS ======================= -->
    <div class="bloco-title">Entradas</div>

    <div class="linha">
        <div class="bloco">
            Normal<br>
            <strong>
                {% localize on %}{{ serie_normal|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Luvu<br>
            <strong>
                {% localize on %}{{ serie_luvu|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Aluguel<br>
            <strong>
                {% localize on %}{{ serie_alunos|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Outros (Frete)<br>
            <strong>
                {% localize on %}{{ serie_frete|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>
    </div>

    <!-- ======================= SAÍDAS ======================= -->
    <div class="bloco-title">Saídas</div>

    <div class="linha">
        <div class="bloco">
            Alimentação<br>
            <strong>
                {% localize on %}{{ serie_alimentacao|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Parqueamento<br>
            <strong>
                {% localize on %}{{ serie_parqueamento|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Taxas<br>
            <strong>
                {% localize on %}{{ serie_taxa|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Outros<br>
            <strong>
                {% localize on %}{{ serie_outros|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>
    </div>

    <div class="linha">
        <div class="bloco">
            Lavagem<br>
            <strong>
                {% localize on %}{{ serie_combustivel_lavagem|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Sobragem<br>
            <strong>
                {% localize on %}{{ serie_combustivel_sobragem|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>

        <div class="bloco">
            Combustível<br>
            <strong>
                {% localize on %}{{ serie_combustivel_valor|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>
    </div>

    <!-- ======================= SALDO ======================= -->
    <div class="bloco-title">Saldo</div>

    <div class="linha">
        <div class="bloco">
            <strong>
                {% localize on %}{{ serie_saldo|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>
    </div>

    <!-- ======================= DESPESAS FIXAS ======================= -->
    <div class="bloco-title">Despesas Fixas</div>

    <div class="linha">
        {% for nome, valor in serie_total_despesas_fixas.items %}
            <div class="bloco">
                {{ nome }}<br>
                <strong>
                    {% localize on %}{{ valor|floatformat:2 }}{% endlocalize %} Kz
                </strong>
            </div>
        {% empty %}
            <div class="bloco">Nenhuma despesa fixa cadastrada.</div>
        {% endfor %}
    </div>

    <!-- ======================= DESPESAS VARIÁVEIS ======================= -->
    <div class="bloco-title">Despesas Variáveis</div>

    <div class="linha">
        {% for nome, valor in serie_despesas_variaveis.items %}
            <div class="bloco">
                {{ nome }}<br>
                <strong>
                    {% localize on %}{{ valor|floatformat:2 }}{% endlocalize %} Kz
                </strong>
            </div>
        {% empty %}
            <div class="bloco">Nenhuma despesa variável.</div>
        {% endfor %}
    </div>

    <!-- ======================= LUCRO ======================= -->
    <div class="bloco-title">Lucro Final</div>

    <div class="linha">
        <div class="bloco">
            <strong>
                {% localize on %}{{ serie_lucro|last|floatformat:2 }}{% endlocalize %} Kz
            </strong>
        </div>
    </div>

</div>

{% endblock %}
